# Railway configuration as code
# Using Dockerfile for explicit multi-stage build control
# Docs: https://docs.railway.app/guides/build-configuration

[build]
# Use Dockerfile (explicit builder for full control over build process)
builder = "DOCKERFILE"

[deploy]
# IMPORTANT: This startCommand must override the cached service setting
# If this is ignored and "npm start" still runs, clear the Start Command field
# in Railway dashboard Settings â†’ Deploy section
startCommand = "npm run start:prod"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# CRITICAL: Persistent volume for SQLite database
# Without this, the database is recreated on every restart/redeploy
[[volumes]]
# Mount path in container (must match DATABASE_PATH env var)
mountPath = "/data"
# Railway will create and persist this volume automatically
# Set size as needed (starts at 1GB, can be increased)
size = "5GB"



